var mt=Object.defineProperty;var Q=e=>{throw TypeError(e)};var yt=(e,t,s)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var M=(e,t,s)=>yt(e,typeof t!="symbol"?t+"":t,s),dt=(e,t,s)=>t.has(e)||Q("Cannot "+s);var j=(e,t,s)=>(dt(e,t,"read from private field"),s?s.call(e):t.get(e)),W=(e,t,s)=>t.has(e)?Q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);import{d as N,h as bt,a3 as I,p as ut,v as gt,q as _t,P as Z,B as ft,c as V,o as q,j as z,F as x,k as O,t as vt,G as wt,_ as St,R as Y,ae as Ct,af as Et,ag as $t,ah as At,ai as Mt,aj as Lt,ak as Bt,al as kt,am as Tt,an as Rt,u as Ot,s as Pt,ao as Dt,ap as jt,aq as zt}from"./chunks/framework.DhZZSqyC.js";import{R as It}from"./chunks/theme.0tymQZCV.js";const Ft=Object.freeze({diffTimeout:1,diffEditCost:4,matchThreshold:.5,matchDistance:1e3,patchDeleteThreshold:.5,patchMargin:4,matchMaxBits:32});function Nt(e){if(e!=null&&e.__resolved)return e;const t={...Ft,...e};return Object.defineProperty(t,"__resolved",{value:!0,enumerable:!1}),t}const L=-1,$=1,C=0;function w(e,t){return[e,t]}function T(e,t,s,n=!0,i){const r=Nt(s);typeof i>"u"&&(r.diffTimeout<=0?i=Number.MAX_VALUE:i=new Date().getTime()+r.diffTimeout*1e3);const o=i;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e===t)return e?[w(C,e)]:[];const a=n;let l=G(e,t);const c=e.substring(0,l);e=e.substring(l),t=t.substring(l),l=U(e,t);const u=e.substring(e.length-l);e=e.substring(0,e.length-l),t=t.substring(0,t.length-l);const g=Ut(e,t,r,a,o);return c&&g.unshift(w(C,c)),u&&g.push(w(C,u)),X(g),g}function Ut(e,t,s,n,i){let r;if(!e)return[w($,t)];if(!t)return[w(L,e)];const o=e.length>t.length?e:t,a=e.length>t.length?t:e,l=o.indexOf(a);if(l!==-1)return r=[w($,o.substring(0,l)),w(C,a),w($,o.substring(l+a.length))],e.length>t.length&&(r[0][0]=r[2][0]=L),r;if(a.length===1)return[w(L,e),w($,t)];const c=Jt(e,t,s);if(c){const u=c[0],g=c[1],f=c[2],p=c[3],h=c[4],m=T(u,f,s,n,i),b=T(g,p,s,n,i);return m.concat([w(C,h)],b)}return n&&e.length>100&&t.length>100?Vt(e,t,s,i):qt(e,t,s,i)}function Vt(e,t,s,n){const i=Ht(e,t);e=i.chars1,t=i.chars2;const r=i.lineArray,o=T(e,t,s,!1,n);Kt(o,r),Yt(o),o.push(w(C,""));let a=0,l=0,c=0,u="",g="";for(;a<o.length;){switch(o[a][0]){case $:c++,g+=o[a][1];break;case L:l++,u+=o[a][1];break;case C:if(l>=1&&c>=1){o.splice(a-l-c,l+c),a=a-l-c;const f=T(u,g,s,!1,n);for(let p=f.length-1;p>=0;p--)o.splice(a,0,f[p]);a=a+f.length}c=0,l=0,u="",g="";break}a++}return o.pop(),o}function qt(e,t,s,n){const i=e.length,r=t.length,o=Math.ceil((i+r)/2),a=o,l=2*o,c=new Array(l),u=new Array(l);for(let v=0;v<l;v++)c[v]=-1,u[v]=-1;c[a+1]=0,u[a+1]=0;const g=i-r,f=g%2!==0;let p=0,h=0,m=0,b=0;for(let v=0;v<o&&!(new Date().getTime()>n);v++){for(let y=-v+p;y<=v-h;y+=2){const _=a+y;let d;y===-v||y!==v&&c[_-1]<c[_+1]?d=c[_+1]:d=c[_-1]+1;let S=d-y;for(;d<i&&S<r&&e.charAt(d)===t.charAt(S);)d++,S++;if(c[_]=d,d>i)h+=2;else if(S>r)p+=2;else if(f){const E=a+g-y;if(E>=0&&E<l&&u[E]!==-1){const B=i-u[E];if(d>=B)return tt(e,t,s,d,S,n)}}}for(let y=-v+m;y<=v-b;y+=2){const _=a+y;let d;y===-v||y!==v&&u[_-1]<u[_+1]?d=u[_+1]:d=u[_-1]+1;let S=d-y;for(;d<i&&S<r&&e.charAt(i-d-1)===t.charAt(r-S-1);)d++,S++;if(u[_]=d,d>i)b+=2;else if(S>r)m+=2;else if(!f){const E=a+g-y;if(E>=0&&E<l&&c[E]!==-1){const B=c[E],R=a+B-E;if(d=i-d,B>=d)return tt(e,t,s,B,R,n)}}}}return[w(L,e),w($,t)]}function tt(e,t,s,n,i,r){const o=e.substring(0,n),a=t.substring(0,i),l=e.substring(n),c=t.substring(i),u=T(o,a,s,!1,r),g=T(l,c,s,!1,r);return u.concat(g)}function Ht(e,t){const s=[],n={};let i=4e4;s[0]="";function r(l){let c="",u=0,g=-1,f=s.length;for(;g<l.length-1;){g=l.indexOf(`
`,u),g===-1&&(g=l.length-1);let p=l.substring(u,g+1);(n.hasOwnProperty?Object.prototype.hasOwnProperty.call(n,p):n[p]!==void 0)?c+=String.fromCharCode(n[p]):(f===i&&(p=l.substring(u),g=l.length),c+=String.fromCharCode(f),n[p]=f,s[f++]=p),u=g+1}return c}const o=r(e);i=65535;const a=r(t);return{chars1:o,chars2:a,lineArray:s}}function Kt(e,t){for(let s=0;s<e.length;s++){const n=e[s][1],i=[];for(let r=0;r<n.length;r++)i[r]=t[n.charCodeAt(r)];e[s][1]=i.join("")}}function G(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;let s=0,n=Math.min(e.length,t.length),i=n,r=0;for(;s<i;)e.substring(r,i)===t.substring(r,i)?(s=i,r=s):n=i,i=Math.floor((n-s)/2+s);return i}function U(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;let s=0,n=Math.min(e.length,t.length),i=n,r=0;for(;s<i;)e.substring(e.length-i,e.length-r)===t.substring(t.length-i,t.length-r)?(s=i,r=s):n=i,i=Math.floor((n-s)/2+s);return i}function et(e,t){const s=e.length,n=t.length;if(s===0||n===0)return 0;s>n?e=e.substring(s-n):s<n&&(t=t.substring(0,s));const i=Math.min(s,n);if(e===t)return i;let r=0,o=1;for(;;){const a=e.substring(i-o),l=t.indexOf(a);if(l===-1)return r;o+=l,(l===0||e.substring(i-o)===t.substring(0,o))&&(r=o,o++)}}function Jt(e,t,s){if(s.diffTimeout<=0)return null;const n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||i.length*2<n.length)return null;function r(h,m,b){const v=h.substring(b,b+Math.floor(h.length/4));let y=-1,_="",d,S,E,B;for(;(y=m.indexOf(v,y+1))!==-1;){const R=G(h.substring(b),m.substring(y)),F=U(h.substring(0,b),m.substring(0,y));_.length<F+R&&(_=m.substring(y-F,y)+m.substring(y,y+R),d=h.substring(0,b-F),S=h.substring(b+R),E=m.substring(0,y-F),B=m.substring(y+R))}return _.length*2>=h.length?[d,S,E,B,_]:null}const o=r(n,i,Math.ceil(n.length/4)),a=r(n,i,Math.ceil(n.length/2));let l;if(!o&&!a)return null;a?o?l=o[4].length>a[4].length?o:a:l=a:l=o;let c,u,g,f;e.length>t.length?(c=l[0],u=l[1],g=l[2],f=l[3]):(g=l[0],f=l[1],c=l[2],u=l[3]);const p=l[4];return[c,u,g,f,p]}function Yt(e){let t=!1;const s=[];let n=0,i=null,r=0,o=0,a=0,l=0,c=0;for(;r<e.length;)e[r][0]===C?(s[n++]=r,o=l,a=c,l=0,c=0,i=e[r][1]):(e[r][0]===$?l+=e[r][1].length:c+=e[r][1].length,i&&i.length<=Math.max(o,a)&&i.length<=Math.max(l,c)&&(e.splice(s[n-1],0,w(L,i)),e[s[n-1]+1][0]=$,n--,n--,r=n>0?s[n-1]:-1,o=0,a=0,l=0,c=0,i=null,t=!0)),r++;for(t&&X(e),Qt(e),r=1;r<e.length;){if(e[r-1][0]===L&&e[r][0]===$){const u=e[r-1][1],g=e[r][1],f=et(u,g),p=et(g,u);f>=p?(f>=u.length/2||f>=g.length/2)&&(e.splice(r,0,w(C,g.substring(0,f))),e[r-1][1]=u.substring(0,u.length-f),e[r+1][1]=g.substring(f),r++):(p>=u.length/2||p>=g.length/2)&&(e.splice(r,0,w(C,u.substring(0,p))),e[r-1][0]=$,e[r-1][1]=g.substring(0,g.length-p),e[r+1][0]=L,e[r+1][1]=u.substring(p),r++),r++}r++}}const nt=/[^a-z0-9]/i,st=/\s/,it=/[\r\n]/,Gt=/\n\r?\n$/,Xt=/^\r?\n\r?\n/;function Qt(e){function t(n,i){if(!n||!i)return 6;const r=n.charAt(n.length-1),o=i.charAt(0),a=r.match(nt),l=o.match(nt),c=a&&r.match(st),u=l&&o.match(st),g=c&&r.match(it),f=u&&o.match(it),p=g&&n.match(Gt),h=f&&i.match(Xt);return p||h?5:g||f?4:a&&!c&&u?3:c||u?2:a||l?1:0}let s=1;for(;s<e.length-1;){if(e[s-1][0]===C&&e[s+1][0]===C){let n=e[s-1][1],i=e[s][1],r=e[s+1][1];const o=U(n,i);if(o){const g=i.substring(i.length-o);n=n.substring(0,n.length-o),i=g+i.substring(0,i.length-o),r=g+r}let a=n,l=i,c=r,u=t(n,i)+t(i,r);for(;i.charAt(0)===r.charAt(0);){n+=i.charAt(0),i=i.substring(1)+r.charAt(0),r=r.substring(1);const g=t(n,i)+t(i,r);g>=u&&(u=g,a=n,l=i,c=r)}e[s-1][1]!==a&&(a?e[s-1][1]=a:(e.splice(s-1,1),s--),e[s][1]=l,c?e[s+1][1]=c:(e.splice(s+1,1),s--))}s++}}function X(e){e.push(w(C,""));let t=0,s=0,n=0,i="",r="",o;for(;t<e.length;)switch(e[t][0]){case $:n++,r+=e[t][1],t++;break;case L:s++,i+=e[t][1],t++;break;case C:s+n>1?(s!==0&&n!==0&&(o=G(r,i),o!==0&&(t-s-n>0&&e[t-s-n-1][0]===C?e[t-s-n-1][1]+=r.substring(0,o):(e.splice(0,0,w(C,r.substring(0,o))),t++),r=r.substring(o),i=i.substring(o)),o=U(r,i),o!==0&&(e[t][1]=r.substring(r.length-o)+e[t][1],r=r.substring(0,r.length-o),i=i.substring(0,i.length-o))),t-=s+n,e.splice(t,s+n),i.length&&(e.splice(t,0,w(L,i)),t++),r.length&&(e.splice(t,0,w($,r)),t++),t++):t!==0&&e[t-1][0]===C?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,n=0,s=0,i="",r="";break}e[e.length-1][1]===""&&e.pop();let a=!1;for(t=1;t<e.length-1;)e[t-1][0]===C&&e[t+1][0]===C&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)===e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),a=!0):e[t][1].substring(0,e[t+1][1].length)===e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),a=!0)),t++;a&&X(e)}function Wt(e){return typeof e=="string"?`'${e}'`:new Zt().serialize(e)}const Zt=function(){var t;class e{constructor(){W(this,t,new Map)}compare(n,i){const r=typeof n,o=typeof i;return r==="string"&&o==="string"?n.localeCompare(i):r==="number"&&o==="number"?n-i:String.prototype.localeCompare.call(this.serialize(n,!0),this.serialize(i,!0))}serialize(n,i){if(n===null)return"null";switch(typeof n){case"string":return i?n:`'${n}'`;case"bigint":return`${n}n`;case"object":return this.$object(n);case"function":return this.$function(n)}return String(n)}serializeObject(n){const i=Object.prototype.toString.call(n);if(i!=="[object Object]")return this.serializeBuiltInType(i.length<10?`unknown:${i}`:i.slice(8,-1),n);const r=n.constructor,o=r===Object||r===void 0?"":r.name;if(o!==""&&globalThis[o]===r)return this.serializeBuiltInType(o,n);if(typeof n.toJSON=="function"){const a=n.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(n))}serializeBuiltInType(n,i){const r=this["$"+n];if(r)return r.call(this,i);if(typeof(i==null?void 0:i.entries)=="function")return this.serializeObjectEntries(n,i.entries());throw new Error(`Cannot serialize ${n}`)}serializeObjectEntries(n,i){const r=Array.from(i).sort((a,l)=>this.compare(a[0],l[0]));let o=`${n}{`;for(let a=0;a<r.length;a++){const[l,c]=r[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<r.length-1&&(o+=",")}return o+"}"}$object(n){let i=j(this,t).get(n);return i===void 0&&(j(this,t).set(n,`#${j(this,t).size}`),i=this.serializeObject(n),j(this,t).set(n,i)),i}$function(n){const i=Function.prototype.toString.call(n);return i.slice(-15)==="[native code] }"?`${n.name||""}()[native]`:`${n.name}(${n.length})${i.replace(/\s*\n\s*/g,"")}`}$Array(n){let i="[";for(let r=0;r<n.length;r++)i+=this.serialize(n[r]),r<n.length-1&&(i+=",");return i+"]"}$Date(n){try{return`Date(${n.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(n){return`ArrayBuffer[${new Uint8Array(n).join(",")}]`}$Set(n){return`Set${this.$Array(Array.from(n).sort((i,r)=>this.compare(i,r)))}`}$Map(n){return this.serializeObjectEntries("Map",n.entries())}}t=new WeakMap;for(const s of["Error","RegExp","URL"])e.prototype["$"+s]=function(n){return`${s}(${n})`};for(const s of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])e.prototype["$"+s]=function(n){return`${s}[${n.join(",")}]`};for(const s of["BigInt64Array","BigUint64Array"])e.prototype["$"+s]=function(n){return`${s}[${n.join("n,")}${n.length>0?"n":""}]`};return e}(),xt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],te=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",k=[];class ne{constructor(){M(this,"_data",new P);M(this,"_hash",new P([...xt]));M(this,"_nDataBytes",0);M(this,"_minBufferSize",0)}finalize(t){t&&this._append(t);const s=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(s/4294967296),this._data.words[(n+64>>>9<<4)+15]=s,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,s){const n=this._hash.words;let i=n[0],r=n[1],o=n[2],a=n[3],l=n[4],c=n[5],u=n[6],g=n[7];for(let f=0;f<64;f++){if(f<16)k[f]=t[s+f]|0;else{const _=k[f-15],d=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,S=k[f-2],E=(S<<15|S>>>17)^(S<<13|S>>>19)^S>>>10;k[f]=d+k[f-7]+E+k[f-16]}const p=l&c^~l&u,h=i&r^i&o^r&o,m=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),v=g+b+p+te[f]+k[f],y=m+h;g=u,u=c,c=l,l=a+v|0,a=o,o=r,r=i,i=v+y|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+g|0}_append(t){typeof t=="string"&&(t=P.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let s,n=this._data.sigBytes/64;t?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);const i=n*16,r=Math.min(i*4,this._data.sigBytes);if(i){for(let o=0;o<i;o+=16)this._doProcessBlock(this._data.words,o);s=this._data.words.splice(0,i),this._data.sigBytes-=r}return new P(s,r)}}class P{constructor(t,s){M(this,"words");M(this,"sigBytes");t=this.words=t||[],this.sigBytes=s===void 0?t.length*4:s}static fromUtf8(t){const s=unescape(encodeURIComponent(t)),n=s.length,i=[];for(let r=0;r<n;r++)i[r>>>2]|=(s.charCodeAt(r)&255)<<24-r%4*8;return new P(i,n)}toBase64(){const t=[];for(let s=0;s<this.sigBytes;s+=3){const n=this.words[s>>>2]>>>24-s%4*8&255,i=this.words[s+1>>>2]>>>24-(s+1)%4*8&255,r=this.words[s+2>>>2]>>>24-(s+2)%4*8&255,o=n<<16|i<<8|r;for(let a=0;a<4&&s*8+a*6<this.sigBytes*8;a++)t.push(ee.charAt(o>>>6*(3-a)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let s=0;s<t.sigBytes;s++){const n=t.words[s>>>2]>>>24-s%4*8&255;this.words[this.sigBytes+s>>>2]|=n<<24-(this.sigBytes+s)%4*8}else for(let s=0;s<t.sigBytes;s+=4)this.words[this.sigBytes+s>>>2]=t.words[s>>>2];this.sigBytes+=t.sigBytes}}function se(e){return new ne().finalize(e).toBase64()}function ie(e){return se(Wt(e))}function re(e,t,s="",n=!1){const i=ie(e+s);let r=0,o=0;const a=Math.ceil(Math.log10(t.length)),l=oe(t).flatMap((c,u)=>{var p;o=((p=c[0])==null?void 0:p.offset)||r;const g=c[c.length-1];g?r=g.offset+g.content.length:r+=1;const f=[...c,{content:`
`,offset:r}];return n&&f.unshift({key:`${i}-ln-${u+1}`,content:`${String(u+1).padStart(a," ")}  `,offset:o,htmlClass:"shiki-magic-move-line-number"}),f}).map((c,u)=>{const g=c;return g.key||(g.key=`${i}-${u}`),g});return{code:e,hash:i,tokens:l,lineNumbers:n}}function oe(e){return e.map(t=>t.flatMap(s=>{if(s.content.match(/^\s+$/))return s;const n=s.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return s;const[,i,r,o]=n;if(!i&&!o)return s;const a=[{...s,offset:s.offset+i.length,content:r}];return i&&a.unshift({content:i,offset:s.offset}),o&&a.push({content:o,offset:s.offset+i.length+r.length}),a}))}function ae(e,t){let s=0;const n=e.key;let i=0;const r=[];function o(){return i===0?(i++,n):`${n}-${i++}`}for(const a of t)a>s&&r.push({...e,content:e.content.slice(s,a),offset:e.offset+s,key:o()}),s=a;return s<e.content.length&&r.push({...e,content:e.content.slice(s),offset:e.offset+s,key:o()}),r}function rt(e,t){const s=Array.from(t instanceof Set?t:new Set(t)).sort((n,i)=>n-i);return s.length?e.flatMap(n=>{const i=s.filter(r=>n.offset<r&&r<n.offset+n.content.length).map(r=>r-n.offset).sort((r,o)=>r-o);return i.length?ae(n,i):n}):e}function le(e,t,s={}){const{splitTokens:n=!1,enhanceMatching:i=!0}=s,r=ce(e.code,t.code,s),o=n?rt(e.tokens,r.flatMap(c=>c.from)):e.tokens,a=n?rt(t.tokens,r.flatMap(c=>c.to)):t.tokens,l=new Set;if(r.forEach(c=>{var h,m;const u=o.filter(b=>b.offset>=c.from[0]&&b.offset+b.content.length<=c.from[1]),g=a.filter(b=>b.offset>=c.to[0]&&b.offset+b.content.length<=c.to[1]);let f=0,p=0;for(;f<u.length&&p<g.length&&!(!u[f]||!g[p]);)u[f].content===g[p].content?(g[p].key=u[f].key,l.add(u[f].key),f++,p++):((h=u[f+1])==null?void 0:h.content)===g[p].content?f++:(u[f].content===((m=g[p+1])==null?void 0:m.content)||f++,p++)}),i)for(const c of o){if(l.has(c.key)||c.content.length<3||!c.content.match(/^[\w-]+$/))continue;const u=a.find(g=>g.content===c.content&&!l.has(g.key));u&&(u.key=c.key,l.add(c.key))}return{from:o.length===e.tokens.length?e:{...e,tokens:o},to:a.length===t.tokens.length?t:{...t,tokens:a}}}function ce(e,t,s={}){var a;let n=T(e,t);n=((a=s.diffCleanup)==null?void 0:a.call(s,n))||n;let i="",r="";const o=[];for(const[l,c]of n)l===0?(o.push({from:[i.length,i.length+c.length],to:[r.length,r.length+c.length],content:c}),i+=c,r+=c):l===-1?i+=c:l===1&&(r+=c);if(i!==e||r!==t)throw new Error("Content mismatch");return o}const A="shiki-magic-move",H=`${A}-leave-from`,he=`${A}-leave-to`,ot=`${A}-leave-active`,K=`${A}-enter-from`,J=`${A}-enter-to`,at=`${A}-enter-active`,lt=`${A}-move`,ct=`${A}-container-resize`,ht=`${A}-container-restyle`,ue={globalScale:1,duration:500,delayMove:.3,delayLeave:.1,delayEnter:.7,delayContainer:.4,stagger:0,easing:"ease",animateContainer:!0,containerStyle:!0};class ge{constructor(t,s={}){M(this,"mapDom",new Map);M(this,"previousPromises",[]);M(this,"isFirstRender",!0);this.options={...ue,...s},typeof t=="string"?this.container=document.querySelector(t):this.container=t,this.anchor=document.createElement("span"),this.anchor.style.position="absolute",this.anchor.style.top="0",this.anchor.style.left="0",this.anchor.style.height="1px",this.anchor.style.width="1px",this.container.prepend(this.anchor)}applyElementContent(t,s){s.content!==`
`&&(t.textContent=s.content,t.classList.add(`${A}-item`))}applyElementStyle(t,s){if(s.htmlStyle)if(typeof s.htmlStyle=="string")t.setAttribute("style",s.htmlStyle);else for(const[n,i]of Object.entries(s.htmlStyle))t.style.setProperty(n,i);s.htmlClass&&(t.className=[`${A}-item`,s.htmlClass].join(" ")),s.color&&(t.style.color=s.color),s.bgColor&&(t.style.backgroundColor=s.bgColor)}applyElement(t,s){this.applyElementContent(t,s),this.applyElementStyle(t,s)}applyNodeStyle(t,s){if(s.bg&&(t.style.backgroundColor=s.bg),s.fg&&(t.style.color=s.fg),s.rootStyle){const n=s.rootStyle.split(";");for(const i of n){const[r,o]=i.split(":");r&&o&&t.style.setProperty(r.trim(),o.trim())}}}applyContainerStyle(t){this.options.containerStyle&&this.applyNodeStyle(this.container,t)}registerTransitionEnd(t,s){return()=>{let n=!1,i=()=>{};const r=Promise.race([Promise.allSettled(t.getAnimations().map(o=>o.finished)).then(()=>s()),new Promise(o=>{i=()=>{n||(n=!0,s(),o())}})]);return r.resolve=i,r}}setCssVariables(){this.container.style.setProperty("--smm-duration",`${this.options.duration}ms`),this.container.style.setProperty("--smm-delay-move",`${this.options.delayMove}`),this.container.style.setProperty("--smm-delay-leave",`${this.options.delayLeave}`),this.container.style.setProperty("--smm-delay-enter",`${this.options.delayEnter}`),this.container.style.setProperty("--smm-delay-container",`${this.options.delayContainer}`),this.container.style.setProperty("--smm-easing",this.options.easing),this.container.style.setProperty("--smm-stagger","0")}replace(t){const s=new Map,n=t.tokens.map(i=>{if(this.mapDom.has(i.key)){const r=this.mapDom.get(i.key);return this.applyElement(r,i),s.set(i.key,r),this.mapDom.delete(i.key),r}else{const r=document.createElement(i.content===`
`?"br":"span");return this.applyElement(r,i),s.set(i.key,r),r}});this.container.replaceChildren(this.anchor,...n),this.applyContainerStyle(t),this.mapDom=s}render(t){this.setCssVariables();const s=new Map,n=[],i=[],r=[],o=[];this.previousPromises.forEach(h=>h.resolve()),this.previousPromises=[];const a=[],{globalScale:l}=this.options,c=new Map;let u=this.anchor.getBoundingClientRect();const g=this.container.getBoundingClientRect();for(const h of this.mapDom.values()){const m=h.getBoundingClientRect();c.set(h,{x:m.x-u.x,y:m.y-u.y})}const f=t.tokens.map(h=>{if(this.mapDom.has(h.key)){const m=this.mapDom.get(h.key);return this.applyElementContent(m,h),a.push(()=>{this.applyElementStyle(m,h)}),n.push(m),s.set(h.key,m),this.mapDom.delete(h.key),m}else{const m=document.createElement(h.content===`
`?"br":"span");return this.applyElement(m,h),i.push(m),s.set(h.key,m),m}});for(const[h,m]of this.mapDom)m.tagName!=="BR"&&r.push(m);for(const h of r)h.style.position="absolute";if(this.container.replaceChildren(this.anchor,...f,...r),this.mapDom=s,r.forEach((h,m)=>{h.style.position="absolute";const b=c.get(h);h.style.top=`${b.y/l}px`,h.style.left=`${b.x/l}px`,this.options.stagger?h.style.setProperty("--smm-stagger",`${m*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),h.classList.add(H),h.classList.add(ot),a.unshift(()=>{h.classList.remove(H),h.classList.add(he)}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(H),h.classList.remove(ot),h.classList.remove(J),h.remove()}))}),this.isFirstRender||i.forEach((h,m)=>{h.classList.add(K),h.classList.add(at),this.options.stagger?h.style.setProperty("--smm-stagger",`${m*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),a.push(()=>{h.classList.remove(K),h.classList.add(J)}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(K),h.classList.remove(at),h.classList.remove(J)}))}),u=this.anchor.getBoundingClientRect(),n.forEach((h,m)=>{const b=h.getBoundingClientRect(),v={x:b.x-u.x,y:b.y-u.y},y=c.get(h);h.style.transitionDuration=h.style.transitionDelay="0ms";const _=(y.x-v.x)/l,d=(y.y-v.y)/l;h.style.transform=`translate(${_}px, ${d}px)`,this.options.stagger?h.style.setProperty("--smm-stagger",`${m*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),a.unshift(()=>{h.classList.add(lt),h.style.transform=h.style.transitionDuration=h.style.transitionDelay=""}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(lt)}))}),this.options.animateContainer&&!this.isFirstRender){const h=this.container.getBoundingClientRect();(h.width!==g.width||h.height!==g.height)&&(this.container.style.transitionDuration=this.container.style.transitionDelay="0ms",this.container.style.height=`${g.height/l}px`,this.container.style.width=`${g.width/l}px`,a.unshift(()=>{this.container.classList.add(ct),this.container.style.transitionDuration=this.container.style.transitionDelay="",this.container.style.height=`${h.height/l}px`,this.container.style.width=`${h.width/l}px`}),o.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(ct),this.container.style.height=this.container.style.width=""})))}this.options.containerStyle&&(this.isFirstRender?this.applyContainerStyle(t):(a.push(()=>{this.container.classList.add(ht),this.applyContainerStyle(t)}),o.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(ht)})))),fe(),a.forEach(h=>h());const p=o.map(h=>h());return this.isFirstRender=!1,this.previousPromises=p,Promise.all(p).then()}}function fe(){return document.body.offsetHeight}const pe=N({name:"ShikiMagicMoveRenderer",props:{animate:{type:Boolean,default:!0},tokens:{type:Object,required:!0},previous:{type:Object,required:!1},options:{type:Object}},emits:["end","start"],setup(e,{emit:t}){const s=ut();let n=!1;return gt(()=>{s.value.innerHTML="",n=!0;const i=new ge(s.value);_t(()=>e.tokens,async r=>{if(Object.assign(i.options,e.options),e.animate){e.previous&&i.replace(e.previous),await Z();const o=i.render(r);await Z(),t("start"),await o,t("end")}else i.replace(r)},{immediate:!0})}),()=>I("pre",{ref:s,class:"shiki-magic-move-container"},n?void 0:ft(e.tokens.tokens,i=>i.content===`
`?I("br",{key:i.key}):I("span",{style:[{color:i.color},i.htmlStyle],class:["shiki-magic-move-item",i.htmlClass],key:i.key},i.content)))}}),me=N({name:"ShikiMagicMovePrecompiled",props:{steps:{type:Array,required:!0},step:{type:Number,default:0},animate:{type:Boolean,default:!0},options:{type:Object,default:()=>({})}},emits:["start","end"],setup(e,{emit:t}){let n=re("",[]);const i=bt(()=>{const r=le(n,e.steps[Math.min(e.step,e.steps.length-1)],e.options);return n=r.to,r});return()=>I(pe,{tokens:i.value.to,previous:i.value.from,options:e.options,animate:e.animate,onStart:()=>t("start"),onEnd:()=>t("end")})}}),ye={class:"magic-move vp-code-group"},de={class:"tabs"},be=["id","name","checked","onClick"],_e=["for"],ve={class:"block"},we={class:"language"},Se=N({__name:"MagicMove",props:{stepsLz:{},stepRanges:{}},setup(e){const t=e;function s(a){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let c="";for(let u=0;u<a;u++){const g=Math.floor(Math.random()*l.length);c+=l[g]}return c}const n=s(6),i=JSON.parse(decodeURIComponent(t.stepsLz)),r=ut(0),o=a=>{r.value=a};return(a,l)=>(q(),V("div",ye,[z("div",de,[(q(!0),V(x,null,ft(O(i),(c,u)=>(q(),V(x,null,[z("input",{id:O(n)+u,name:O(n),checked:u===0,type:"radio",onClick:g=>o(u)},null,8,be),z("label",{for:O(n)+u,flex:"","items-center":""},vt(c.fileName),9,_e)],64))),256))]),z("div",ve,[z("div",we,[wt(O(me),{steps:O(i),step:r.value},null,8,["steps","step"])])])]))}}),Ce=St(Se,[["__scopeId","data-v-df21392f"]]);function pt(e){if(e.extends){const t=pt(e.extends);return{...t,...e,async enhanceApp(s){t.enhanceApp&&await t.enhanceApp(s),e.enhanceApp&&await e.enhanceApp(s)}}}return e}const D=pt(It),Ee=N({name:"VitePressApp",setup(){const{site:e,lang:t,dir:s}=Ot();return gt(()=>{Pt(()=>{document.documentElement.lang=t.value,document.documentElement.dir=s.value})}),e.value.router.prefetchLinks&&Dt(),jt(),zt(),D.setup&&D.setup(),()=>I(D.Layout)}});async function $e(){globalThis.__VITEPRESS__=!0;const e=Me(),t=Ae();t.provide(Et,e);const s=$t(e.route);return t.provide(At,s),t.component("MagicMove",Ce),t.component("Content",Mt),t.component("ClientOnly",Lt),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return s.frontmatter.value}},$params:{get(){return s.page.value.params}}}),D.enhanceApp&&await D.enhanceApp({app:t,router:e,siteData:Bt}),{app:t,router:e,data:s}}function Ae(){return Rt(Ee)}function Me(){let e=Y,t;return kt(s=>{let n=Tt(s),i=null;return n&&(e&&(t=n),(e||t===n)&&(n=n.replace(/\.js$/,".lean.js")),i=import(n)),Y&&(e=!1),i},D.NotFound)}Y&&$e().then(({app:e,router:t,data:s})=>{t.go().then(()=>{Ct(t.route,s.site),e.mount("#app")})});export{$e as createApp};
